<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Property • Vacation Haven</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet" />
  <style>
    :root{--blue:#2c5f6b;--beige:#e6d5b8;--coral:#ff6b6b;--off:#fafafa;--text:#333;--muted:#6b7280;--shadow:0 10px 30px rgba(0,0,0,.08);--r:16px}
    *{box-sizing:border-box}html,body{margin:0;padding:0}
    body{font-family:Lato,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans";background:var(--off);color:var(--text);line-height:1.6}
    .container{width:min(1120px,92%);margin:0 auto}
    .header{position:sticky;top:0;z-index:50;background:rgba(250,250,250,.85);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid rgba(0,0,0,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--blue);font-weight:800}
    .brand .logo{width:34px;height:34px;display:grid;place-items:center;background:var(--blue);color:#fff;border-radius:10px;box-shadow:var(--shadow);font-weight:700}
    .menu{display:flex;gap:22px}.menu a{color:#333;text-decoration:none;font-weight:600}
    .cta{background:var(--coral);color:#fff;padding:10px 16px;border-radius:999px;border:none;font-family:Poppins,sans-serif;font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
    h1{font-family:'Playfair Display',serif;font-size:clamp(26px,4.5vw,40px);margin:18px 0}
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:24px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:#fff;border-radius:var(--r);box-shadow:var(--shadow);overflow:hidden}
    .body{padding:18px}
    .heroimg{width:100%;height:380px;object-fit:cover;display:block}
    .small{color:var(--muted);font-size:14px}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
    .gallery img{width:100%;height:140px;object-fit:cover;border-radius:10px}
    .btnlink{display:block;text-align:center;text-decoration:none;border-radius:999px;padding:10px 16px;margin-top:10px;background:var(--coral);color:#fff;font-weight:700;box-shadow:var(--shadow)}
  </style>
</head>
<body>
  <header class="header">
    <div class="container nav">
      <a class="brand" href="/"><span class="logo">VH</span><span>Vacation Haven</span></a>
      <nav class="menu">
        <a href="/#homes">Browse Homes</a>
        <a href="/#/browse">All Listings</a>
        <a href="/contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container" id="content" style="padding:28px 0">
    <a href="/#/browse" class="small">← Back to all listings</a>
    <h1 id="title">Loading…</h1>
    <div class="grid">
      <article class="card">
        <img id="hero" class="heroimg" alt="" />
        <div class="body">
          <p id="meta" class="small"></p>
          <p id="desc"></p>
          <div id="gallery" class="gallery"></div>
        </div>
      </article>

      <aside class="card" style="position:sticky;top:90px;align-self:start">
        <div class="body">
          <h3 style="margin:0 0 10px">Reserve Your Stay</h3>
          <div id="price" class="small" style="margin-bottom:12px"></div>
          <form onsubmit="event.preventDefault(); bookNow();">
            <label class="small">Check-in<br/><input id="in" type="date" style="width:100%;padding:10px;border:1px solid #eee;border-radius:12px"></label><br/><br/>
            <label class="small">Check-out<br/><input id="out" type="date" style="width:100%;padding:10px;border:1px solid #eee;border-radius:12px"></label><br/><br/>
            <label class="small">Guests<br/><input id="guests" type="number" value="2" min="1" style="width:100%;padding:10px;border:1px solid #eee;border-radius:12px"></label><br/>
            <button class="cta" style="width:100%;margin-top:12px" type="submit">Request to Book</button>
          </form>

          <a id="contactBtn" class="btnlink" href="/contact.html">Contact us about this property</a>
          <div id="channels" style="display:grid;gap:8px;margin-top:10px"></div>
        </div>
      </aside>
    </div>
  </main>

  <script>
    // get id from ?id=coastal
    const params = new URLSearchParams(location.search);
    const id = params.get('id');

    async function load() {
      const resp = await fetch('/listings.json');  // same folder (repo root)
      const all = await resp.json();
      const l = all.find(x => x.id === id);
      if (!l) { document.getElementById('content').innerHTML = '<p>Listing not found.</p>'; return; }

      document.title = l.title + ' • Vacation Haven';
      document.getElementById('title').textContent = l.title;
      document.getElementById('hero').src = l.img;
      document.getElementById('hero').alt = l.title;
      document.getElementById('meta').textContent = l.meta;
      document.getElementById('desc').textContent = l.desc || '';
      document.getElementById('price').textContent = 'From $' + l.price + '/night';

      // gallery
      if (l.gallery && l.gallery.length) {
        document.getElementById('gallery').innerHTML =
          l.gallery.map(src => `<img src="${src}" alt="">`).join('');
      }

      // contact button prefill
      document.getElementById('contactBtn').href = '/contact.html?property=' + encodeURIComponent(l.id);

      // booking channel buttons
      const wrap = document.getElementById('channels');
      const btn = (label, url) => url ? `<a class="btnlink" target="_blank" rel="noopener nofollow" href="${url}">Book on ${label}</a>` : '';
      wrap.innerHTML = [btn('Airbnb', l.airbnb), btn('Vrbo', l.vrbo), btn('Booking.com', l.booking)]
        .filter(Boolean).join('');

      // quick bookNow picks the first available channel
      window.bookNow = () => {
        const url = l.airbnb || l.vrbo || l.booking;
        if (url) window.open(url, '_blank', 'noopener');
        else alert('Add a booking link for this property.');
      };
    }

    load();
  </script>
</body>
</html>
